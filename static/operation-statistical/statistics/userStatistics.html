<!DOCTYPE html>
<html lang="en">

<head>
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/layui.css">
    <link rel="stylesheet" href="../css/userStatistics.css">
    <script src="../echarts.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.0/jquery.js"></script>
    <title>userStatistics</title>
  
</head>

<body>
    
    <div class="content">
      
        <div class="right">
            <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                <ul class="layui-tab-title">
                    <li onclick="defaultCard()">全部人员</li>
                    <li onclick="changeEdu()">教育机构</li>
                    <li onclick="changeFactory()">厂商</lionclick>
                    <li onclick="changeUser()">C端用户</li>
                </ul>
                <hr style="margin-top: 1px;" />
                <div class="layui-tab-content">
                    <div class="layui-tab-item layui-show">
                        <div>
                            <div class="card">
                                <p>应用总数（个）</p>
                                <p id="appSum"></p>
                                <img src="../images/extra/u5874.png">
                            </div>
                            <div class="card">
                                <p>总下载量（次）</p>
                                <p id="downSum"></p>
                                <img src="../images/extra/u5874.png">
                            </div>
                            <!--<div class="card">-->
                                <!--<p>应用中申请（个）</p>-->
                                <!--<p id="appApply"></p>-->
                                <!--<img src="../images/extra/u5889.png">-->
                            <!--</div>-->
                            <!--<div class="card">-->
                                <!--<p>用户收藏数（个）</p>-->
                                <!--<p id="userColl"></p>-->
                                <!--<img src="../images/extra/u5899.png">-->
                            <!--</div>-->
                        </div>
                        <script>
                            
                            // var url=window.parent.document.getElementById('userCount').contentWindow.location.href;
                            // var id=url.substring(url.indexOf('=')+1);
                            // console.log(id);
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserAppliedStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              let length=data.length-1;
                              $('#appSum').text(data[length].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserDownloadStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              let downLength=data.length-1;
                              $('#downSum').text(data[downLength].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyStatisticsList',{type:'全部人员'}).done(function (data) {

                              console.log(data);
                              myChartOne.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyMonthStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              myChartTwo.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            
                          function defaultCard() {
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserAppliedStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              let length=data.length-1;
                              $('#appSum').text(data[length].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserDownloadStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              let downLength=data.length-1;
                              $('#downSum').text(data[downLength].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyStatisticsList',{type:'全部人员'}).done(function (data) {

                              console.log(data);
                              myChartOne.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyMonthStatisticsList',{type:'全部人员'}).done(function (data) {
                              // console.log(data);
                              myChartTwo.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            })
                          }
                          function changeEdu() {
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserAppliedStatisticsList',{type:'教育机构'}).done(function (data) {
                              
                              let length=data.length-1;
                              $('#appSum').text(data[length].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserDownloadStatisticsList',{type:'教育机构'}).done(function (data) {
                              
                              let downLength=data.length-1;
                              $('#downSum').text(data[downLength].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyStatisticsList',{type:'教育机构'}).done(function (data) {
                              
                              myChartOne.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyMonthStatisticsList',{type:'教育机构'}).done(function (data) {
                              // console.log(data);
                              myChartTwo.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            })
                          }
                          function changeFactory() {
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserAppliedStatisticsList',{type:'厂商'}).done(function (data) {
                              // console.log(data);
                              let length=data.length-1;
                              $('#appSum').text(data[length].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserDownloadStatisticsList',{type:'厂商'}).done(function (data) {
                              let downLength=data.length-1;
                              $('#downSum').text(data[downLength].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyStatisticsList',{type:'厂商'}).done(function (data) {
                              
                              myChartOne.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyMonthStatisticsList',{type:'厂商'}).done(function (data) {
                              myChartTwo.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            })
                          }
                          
                          function changeUser() {
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserAppliedStatisticsList',{type:'C端用户'}).done(function (data) {
                              let length=data.length-1;
                              $('#appSum').text(data[length].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserDownloadStatisticsList',{type:'C端用户'}).done(function (data) {
                              // console.log(data);
                              let downLength=data.length-1;
                              $('#downSum').text(data[downLength].total);
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyStatisticsList',{type:'C端用户'}).done(function (data) {
                              
                              myChartOne.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            });
                            $.get('http://p1663488m8.imwork.net:49784/server/statistics/getUserApplyMonthStatisticsList',{type:'C端用户'}).done(function (data) {
                              // console.log(data);
                              myChartTwo.setOption(
                                option = {
                                  legend: {
                                    data
                                  },
                                  series: [{
                                    data
                                  }]

                                }
                              )
                            })
                          }
                          
                          
                        </script>


                        <div class="pie">
                            <div class="pie-left">
                                <p>应用类型占比</p>
                                <div id="apptype" style="width:500px;height:240px">
                                    <script type="text/javascript">
                                        let myChartOne = echarts.init(document.getElementById('apptype'));
                                        // 指定图表的配置项和数据
                                        let optionOne = {
                                            tooltip: { //提示框组件
                                                trigger: 'item', //触发类型(饼状图片就是用这个)
                                                formatter: "{a} <br/>{b} : {c} ({d}%)" //提示框浮层内容格式器
                                            },
                                            color: ['#48cda6', '#fd87ab', '#11abff', "#FFD700",'#66CD00','#EE1289','#EE9A00','#C0FF3E'],
                                            legend: { //图例组件
                                                //right:100,  //图例组件离右边的距离
                                                orient: 'horizontal', //布局  纵向布局 图例标记居文字的左边 vertical则反之
                                                width: 40, //图行例组件的宽度,默认自适应
                                                x: 'right', //图例显示在右边
                                                y: 'center', //图例在垂直方向上面显示居中
                                                itemWidth: 10, //图例标记的图形宽度
                                                itemHeight: 10, //图例标记的图形高度
                                                // data:['60%','30%','10%'],
                                                data: [],
                                                textStyle: { //图例文字的样式
                                                    color: '#333', //文字颜色
                                                    fontSize: 13 //文字大小
                                                }
                                            },
                                            series: [ //系列列表
                                                {
                                                    name: '应用占比', //系列名称
                                                    type: 'pie', //类型 pie表示饼图
                                                    center: ['30%', '50%'], //设置饼的原心坐标 不设置就会默认在中心的位置
                                                    radius: ['50%', '70%'], //饼图的半径,第一项是内半径,第二项是外半径,内半径为0就是真的饼,不是环形
                                                    avoidLabelOverlap: false,
                                                    label: {
                                                      normal: {
                                                        show: false,
                                                        position: 'center'
                                                      },
                                                      emphasis: {
                                                        show: true,
                                                        textStyle: {
                                                          fontSize: '20',
                                                          fontWeight: 'bold'
                                                        }
                                                      }
                                                    },
                                                    labelLine: {
                                                      normal: {
                                                        show: false
                                                      }
                                                    },
                                                    data: []
                                                }
                                            ]
                                        };

                                        myChartOne.setOption(optionOne);
                                        // $.get('http://192.168.1.26:52999/server/statistics/getUserApplyStatisticsList',{type:'全部人员'}).done(function (data) {
                                        //
                                        //     console.log(data);
                                        //     myChartOne.setOption(
                                        //         option = {
                                        //             legend: {
                                        //                 data
                                        //             },
                                        //             series: [{
                                        //                 data
                                        //             }]
                                        //
                                        //         }
                                        //     )
                                        // })
                                    </script>
                                </div>
                            </div>
                            <div class="pie-right">
                                <p>当月应用下载型占比</p>
                                <div id="appdown" style="width:500px;height:240px">
                                    <script type="text/javascript">
                                        let myChartTwo = echarts.init(document.getElementById('appdown'));

                                        let optionTwo = {
                                            tooltip: {
                                                trigger: 'item',
                                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                                            },
                                          color: ['#48cda6', '#fd87ab', '#11abff', "#FFD700",'#66CD00','#EE1289','#EE9A00','#C0FF3E'],
                                            legend: {

                                                orient: 'horizontal',
                                                width: 40,
                                                x: 'right',
                                                y: 'center',
                                                itemWidth: 10,
                                                itemHeight: 10,
                                                data: [],
                                                textStyle: {
                                                    color: '#333',
                                                    fontSize: 13
                                                }
                                            },
                                            series: [ //系列列表
                                                {
                                                    name: '下载占比',
                                                    type: 'pie',
                                                    center: ['30%', '50%'],
                                                    radius: ['50%', '70%'],
                                                    avoidLabelOverlap: false,
                                                    label: {
                                                      normal: {
                                                        show: false,
                                                        position: 'center'
                                                      },
                                                      emphasis: {
                                                        show: true,
                                                        textStyle: {
                                                          fontSize: '20',
                                                          fontWeight: 'bold'
                                                        }
                                                      }
                                                    },
                                                    labelLine: {
                                                      normal: {
                                                        show: false
                                                      }
                                                    },
                                                    data: []
                                                }
                                            ]
                                        };
                                        myChartTwo.setOption(optionTwo);
                                    
                                    </script>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                
            </div>
        </div>

    </div>

    
    <script src="../layui.js"></script>
    <script>
        
        layui.use(['element', 'table'], function () {
            let element = layui.element,
                table = layui.table,
                $ = layui.jquery; //导航的hover效果、二级菜单等功能，需要依赖element模块
          
        });
    </script>
</body>

</html>
